<!-- 标题 -->
<h1 class="w3-center w3-padding-64 w3-tangerine"><span class="w3-tag w3-wide">课程介绍</span></h1>
<!-- 内容 -->

<div style="text-align: right">
    <a title="Table Of Content" href="/archive/java/java_classfile_index.html">TOC</a>
    <a href="javascript:void(0);" onclick="toggle_all_sub_note()">Toggle Commentary</a>
</div>

<h2>课程主题</h2>

<p class="indented">
    我们知道，一个<code>.java</code>文件经过<code>javac</code>编译之后，会生成<code>.class</code>文件。<code>.class</code>文件就是一个具体的Java ClassFile，它就是我们研究的主题。
</p>

<div class="w3-display-container w3-center">
    <img class="w3-image w3-center" src="/images/java/classfile/javac_from_java_to_class.jpeg" alt="javac"/>

</div>

<p class="indented">
    那么，对一个具体的<code>.class</code>文件（Java ClassFile），我们要研究什么呢？我们要研究就是这个<code>.class</code>文件（Java ClassFile）的存储结构。在过去的认知当中，我们知道<code>.class</code>文件（Java ClassFile）内存储的是二进制数据、是字节码（bytecode），并止步于此，不再进行一个深入研究；现在，我们从<code>.class</code>文件（Java ClassFile）作为起点，来研究的里面的字节码（bytecode）的存储结构。Java ClassFile的结构如下图所示。
</p>

<div class="w3-display-container w3-center">
    <img class="w3-image w3-center" src="/images/java/classfile/java_classfile_structure.png" alt="ClassFile structure"/>
</div>

<div class="w3-panel w3-pale-blue w3-leftbar w3-border-blue">
    <p>NOTE: 本课程的研究主题是<code>.class</code>文件（Java ClassFile），研究它的存储结构（Structure）。</p>
</div>

<h2>面向人群</h2>

<p>
    适合学习的人群：
</p>

<ul>
    <li>出于工作需要，想要使用bytecode的类库（例如ASM、Javassist），但对bytecode不熟悉的从业工作者。本课程是对bytecode技术的原理讲解，而ASM等类库是对bytecode技术的运用，学完本课程有助于读者尽快掌握ASM的使用。用一种形象的说法来讲就是“有九阳神功护体，学什么武功都特别快”。</li>
    <li>出于兴趣爱好，想要对JVM中bytecode有深入理解的技术追求者。</li>
</ul>

<p>
    不适合的人群：
</p>

<ul>
    <li>刚刚接触Java基础知识的从业人员。因为要理解本课程的内容，需要一定的基础知识和实践操作经验，刚接触Java基础知识的从业人员理解起来会有比较大的难度。</li>
    <li>想要快速提升薪资的从业人员。因为本课程的内容是研究的JVM层面的一些内容，并不是应用层面的技术，它能加深你对底层技术的理解程度，但并不能马上就应用起来，需要长期时间的积累，才能有所成果。</li>
</ul>

<p>
    对读者知识储备的期望：
</p>

<ul>
    <li>对于Java的I/O概念有基本的理解。</li>
    <li>一定的英语阅读能力。一方面，它是帮助读者获取信息的有效手段；另一方面，读者可以根据从英文资料中获取的信息，来审视本课程的内容是否有谬误之处。</li>
</ul>

<h2>课程规划</h2>

<h3>主要内容</h3>

<p class="indented">
    我们明确了研究主题是<code>.class</code>文件（Java ClassFile），现在就是把<b>整个研究主题</b>拆分成<b>一个个具体的、分阶段讲解的内容</b>。本课程的主要内容就如下所示：
</p>

<div class="w3-display-container w3-center">
    <img class="w3-image w3-center" src="/images/java/classfile/java_classfile_main_content.png" alt="Java ClassFile Main Content"/>
</div>

<p class="indented">
    第一部分，Cognition，它是在认知的层面做一些准备工作。英语单词cognition的翻译为“认知；认识；感知”，其英文含义表述为the process by which knowledge and understanding is developed in the mind。这部分内容，并没有讲解实质的技术问题，与Java内容无关，它更多的是让读者在心态上的调整。（当然，我是希望这部分内容能够帮助到大家，但如果大家不感兴趣，完全可以跳过去）
    <sub class="my_note" style="color:blue">笔记：这部分是与技术无关的内容。</sub>
    <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
</p>

<p class="indented">
    第二部分，Concept，它是从概念层面切入，让大家从整体上对Java Architecture有一个全局的认知。我可以想象到一些词汇是“会当凌绝顶，一览众山小”、“高屋建瓴”和“纲举目张”。一方面，是让大家了解到Java ClassFile在整个Java Architecture当中所处的位置；另一方面，也对Java ClassFile自身所包含的一些少量的、简单的概念进行介绍，方便大家之后的学习。
    <sub class="my_note" style="color:blue">笔记：这部分是与技术相关的内容，它是一个对技术掌握的整体视角。</sub>
    <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
</p>

<p class="indented">
    第三部分，Byte Perspective、Attribute Perspective和Opcode Perspective，是本课程的核心内容。学了这部分内容，相当于学完了整个课程的80%的内容。我使用到了perspective，它的本义是“透视法”，引申义为“一种思考问题的方法”，英文表述为a way of thinking about sth。我想表达的目的，就是对于Java ClassFile这个研究主题，从不同的角度进行切入，实现一个从简单到复杂的学习过程。
    <sub class="my_note" style="color:blue">笔记：这部分是与技术相关的内容，它涉及到具体的实现细节。</sub>
    <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
</p>

<p class="indented">
    第四部分，Java Features Perspective，是本课程的扩展内容。它是从JDK发展的角度来切入，我们知道，每一个新的JDK版本都多多少少的引入了一些新的特性（Feature）。在这部分内容当中，我们把这些新的特性（Feature）放到bytecode的视角去审视，一方面是温习已经学过的知识，另一方面也可能学到一些新的东西。
    <sub class="my_note" style="color:blue">笔记：这部分是与技术相关的内容，以温习旧知识为主，学习新知识为辅。</sub>
    <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
</p>

<p class="indented">
    第五部分，Examples和The Final Thought，是本课程的总结性内容。Examples是以总结代码（Code）示例为主，而The Final Thought是以总结“观念、观点”为主。
    <sub class="my_note" style="color:blue">笔记：这部分是与技术相关的内容，主要是知识总结。</sub>
    <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
</p>

<h3>学习难点</h3>

<p>
    学习《The Java Virtual Machine Specification》过程中的难点主要体现在<b>四个方面</b>。
</p>

<ul>
    <li>
        <b>第一方面，是源于认知程度的差异</b>，是<b>JVM文档的作者</b>与<b>JVM文档的读者</b>之间的认知程度的差异。JVM文档的作者们，在书写JVM的文档的时候，是建立在一个全局的、完整的对JVM的认知的基础上写的，可以轻易的从一个概念引生出另外的许多其它概念；而对JVM不太了解的读者，可能在不同的概念跳转之间，迷失了自己的“方向”。
        <sub class="my_note" style="color:blue">笔记：这是从“人”的角度来说，由于双方知识不对等造成的。</sub>
        <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
    </li>
    <li>
        <b>第二方面，是源于JVM文档的书写风格</b>。JVM文档是一个很“简洁”的书写风格，这就导致了一个问题，它缺少足够的信息或示例代码来把其中一句话或一个问题给讲清楚；换句话说，它提供的知识的“密度”非常大，并没有提供足够的“空间”（这个“空间”可以理解为“时间”或“代码示例”等内容）去真正理解它的含义。
        <sub class="my_note" style="color:blue">笔记：这是从“文档”的角度来说的，由其书写风格决定的。</sub>
        <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
    </li>
    <li>
        <b>第三方面，可能是源于不同语言的差异</b>。更进一步说，就是中文和英文之间的差异。有的人，可能就天生喜欢英文，或者对英文有天赋，而有的人，则对英文避而远之。我们知道，JVM文档是由英文写的，那可能就对于不太了解英文的中文使用造成了语言上的障碍。
        <sub class="my_note" style="color:blue">笔记：这是从“语言”的角度来说的，源自于母语的差异。</sub>
        <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
    </li>
    <li>
        <b>第四方面，针对一个具体的<code>.class</code>文件，缺少一个合适的工具对它进行研究</b>。如果在只有一个十六进制工具的情况下，要学习ClassFile的内容是有点困难的，当然，有恒心还是能做到的。一个合适的工具，能够简化认知的过程。
        <sub class="my_note" style="color:blue">笔记：这是从“工具”的角度来说，缺少合适的工具。</sub>
        <img src="/images/note.png" onclick="toggle_paragraph_sub_note(this)"/>
    </li>
</ul>

<h3>应对策略</h3>

<ul>
    <li>
        第一方面，降低学习难度。理想中的学习曲线，应该是一个平缓上升的方式。初期的时候，只介绍一些主要的概念，以讲明白整体逻辑为主；后续的时候，如果有需要，再去引入必要的概念，尽量让认知梯度是一个慢慢增长的过程。
    </li>
    <li>
        第二方面，提供足够的代码示例。大家可以通过观察代码执行结果、修改代码等，以实际可操作性方式去理解问题。
    </li>
    <li>
        第三方面，则需要读者的英语水平，达到一个可以读懂英文文档的程度。这个要求，并不是特别的高。
    </li>
    <li>
        第四方面，我编写一个读取<code>.class</code>文件的Java项目，方便查看其存储结构。
    </li>
</ul>


<h3>课程目标</h3>

<p>
    通过本课程，我希望可以达到以下两个目标：
</p>

<ul>
    <li>第一个目标，是希望提供一条简洁的路径，让人能够在较短的时间内能够对ClassFile的内容有整体上的把握。因此，有些内容是可以选学的、跳学的。</li>
    <li>第二个目标，是希望能够在第一个阶段性目标的基础上，让人能够对某一个特定的主题或内容进行更深入的研究和探索。</li>
</ul>

<div class="w3-panel w3-pale-blue w3-leftbar w3-border-blue">
    <p>IMHO：学习ClassFile，是一个长期浸染的过程。从某种程度上来说，学习的过程，是一个“见怪不怪”的过程。在这个过程当中，我会尽量以实际的代码案例帮助读者理解。正如Linus说的：Talk is cheap, Show me the Code。</p>
</div>

<div class="w3-display-container w3-center">
    <img class="w3-image w3-center" src="/images/java/classfile/talk_is_cheap_show_me_the_code.png" alt="talk is cheap show me the code"/>
</div>

<h2>参考资料</h2>

<p class="indented">
    第一份资料，是Oracle的官方文档《The Java Virtual Machine Specification, Java SE 8 Edition》。
    其中的“Chapter 4. The class File Format”和“Chapter 6. The Java Virtual Machine Instruction Set”与本课程直接相关。
</p>

<p class="indented">
    关于《The Java Virtual Machine Specification, Java SE 8 Edition》与本课程的关系：它是本课程内容的依据。
    它的内容，比较简洁、晦涩，本课程的内容就是在解读它。
</p>

<ul>
    <li>
        以学习为主要目的的同学，可以在<a class="external" href="https://docs.oracle.com/javase/specs/" target="_blank">Oracle官网</a>进行查看。
        （<a class="external" href="https://docs.oracle.com/javase/specs/jvms/se8/jvms8.pdf" target="_blank">PDF版本</a>
        <a class="external" href="https://docs.oracle.com/javase/specs/jvms/se8/html/index.html" target="_blank">网页版本</a>）
    </li>
    <li>以收藏为主要目的的同学，可以在京东、淘宝等网站上进行购买。</li>
</ul>

<p class="indented">
    第二份资料，是一本书，《Inside the Java 2 Virtual Machine》，其作者是Bill Venners，该书是在2000年发布的。
    虽然现在是2020年，该书距今有20年之久，IMHO，它仍然是一本很有价值的书。
</p>

<p class="indented">
    关于《Inside the Java 2 Virtual Machine》与本课程的关系：这本书和本课程是相得益彰的关系。
    学了本课程，再读这本书，虽然它过去20年了，有些知识过时了，但有些内容非常的有价值，能够指出事物的本质，能够让人的理解更进一层。
    如果你先读了这本书，那本课程可能提供给你的就是一些JDK版本更新后的内容和一些示例代码，帮助大家理解这些内容。
</p>

<ul>
    <li>以学习为主要目的的同学，可以在网络上下载其相应的电子版。</li>
    <li>以收藏为主要目的的同学，可以在<a class="external" href="https://www.amazon.com/Inside-Java-2-Virtual-Machine/dp/0071350934" target="_blank">亚马逊</a>进行购买。</li>
</ul>

<div class="w3-display-container w3-center">
    <img class="w3-image w3-center" src="/images/ebook/inside_the_java2_virtual_machine.jpg" alt="Inside the Java 2 Virtual Machine"/>
</div>

<p class="indented">
    第三份资料，也是一本书，《深入理解Java虚拟机：JVM高级特性与最佳实践（第3版）》，其作者是周志明，该书是在2019年出版。
    如果想要参考的话，推荐使用第3版，而不推荐使用第2版。一方面是因为第2版是在JDK 7的基础上撰写的，另一方面第3版也修正了修改第2版中存在的一些问题。
    该书中的“第6章 类文件结构”和“第8章 虚拟机字节码执行引擎”与本课程有相关性。
</p>

<p class="indented">
    关于《深入理解Java虚拟机：JVM高级特性与最佳实践（第3版）》与本课程的关系：
    如果先学本课程，再读这本书，会觉得书的中一些内容比较好理解，因为书中的一些描述还是比较抽象、概括的；
    如果先读这本书，对于理解本课程的内容帮助并不是特别大，帮助还是有的。
    因为本课程讲的内容，还是更具体、可动手操作性更强一些。
</p>

<ul>
    <li>以学习为主要目的的同学，可以在网络上下载其相应的电子版。</li>
    <li>以收藏为主要目的的同学，可以在京东、淘宝等网站上进行购买。</li>
</ul>

<div class="w3-display-container w3-center">
    <img class="w3-image w3-center" src="/images/ebook/understanding_the_jvm_3rd.png" alt="深入理解Java虚拟机：JVM高级特性与最佳实践（第3版）"/>
    <img class="w3-image w3-center" src="/images/ebook/understanding_the_jvm_2nd.jpg" alt="深入理解Java虚拟机：JVM高级特性与最佳实践（第3版）"/>
</div>

<div class="w3-panel w3-pale-red w3-leftbar w3-rightbar w3-border-red">
    <p>
        注意：第3版是紫色的封面，第2版是蓝色的封面。
    </p>
</div>
